{"version":3,"sources":["../src/common/mvc/components/GlobalAcceptMimesMiddleware.ts"],"names":[],"mappings":";;;AAAA,yDAAgD;AAChD,uFAAkF;AAClF,+DAA0D;AAC1D,8DAAyD;AAGzD;;GAEG;AAEH,IAAa,2BAA2B,GAAxC;IACE,YAAoB,qBAA4C;QAA5C,0BAAqB,GAArB,qBAAqB,CAAuB;IAAG,CAAC;IAEpE,GAAG,CAAY,OAAY;QACzB,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,IAAS,EAAE,EAAE;YAC3D,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC1B,MAAM,IAAI,iCAAa,CAAC,IAAI,CAAC,CAAC;aAC/B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AAPC;IAAK,mBAAA,iBAAO,EAAE,CAAA;;;;sDAMb;AATU,2BAA2B;IADvC,uBAAU,EAAE;6CAEgC,6CAAqB;GADrD,2BAA2B,CAUvC;AAVY,kEAA2B","file":"GlobalAcceptMimesMiddleware.js","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {ServerSettingsService} from \"../../config/services/ServerSettingsService\";\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {Request} from \"../../filters/decorators/request\";\nimport {IMiddleware} from \"../interfaces/index\";\n\n/**\n * @middleware\n */\n@Middleware()\nexport class GlobalAcceptMimesMiddleware implements IMiddleware {\n  constructor(private serverSettingsService: ServerSettingsService) {}\n\n  use(@Request() request: any) {\n    this.serverSettingsService.acceptMimes.forEach((mime: any) => {\n      if (!request.accepts(mime)) {\n        throw new NotAcceptable(mime);\n      }\n    });\n  }\n}\n"],"sourceRoot":"../../../"}