{"version":3,"sources":["../src/common/mvc/components/AcceptMimesMiddleware.ts"],"names":[],"mappings":";;;AAAA,yDAAgD;AAChD,gEAA2D;AAC3D,+DAA0D;AAC1D,wEAAmE;AACnE,8DAAyD;AAGzD;;;GAGG;AAEH,IAAa,qBAAqB,6BAAlC;IACS,GAAG,CAAiB,QAA0B,EAAa,OAAY;QAC5E,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,uBAAqB,CAAC,IAAI,EAAE,CAAC;QAExD,KAAK,CAAC,OAAO,CAAC,CAAC,IAAY,EAAE,EAAE;YAC7B,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBAC1B,MAAM,IAAI,iCAAa,CAAC,IAAI,CAAC,CAAC;aAC/B;QACH,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAA;AATC;IAAY,mBAAA,2BAAY,EAAE,CAAA,EAA8B,mBAAA,iBAAO,EAAE,CAAA;;6CAA5B,mCAAgB;;gDAQpD;AATU,qBAAqB;IADjC,uBAAU,EAAE;GACA,qBAAqB,CAUjC;AAVY,sDAAqB","file":"AcceptMimesMiddleware.js","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {EndpointMetadata} from \"../class/EndpointMetadata\";\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {EndpointInfo} from \"../../filters/decorators/endpointInfo\";\nimport {Request} from \"../../filters/decorators/request\";\nimport {IMiddleware} from \"../interfaces\";\n\n/**\n * @private\n * @middleware\n */\n@Middleware()\nexport class AcceptMimesMiddleware implements IMiddleware {\n  public use(@EndpointInfo() endpoint: EndpointMetadata, @Request() request: any): void {\n    const mimes = endpoint.get(AcceptMimesMiddleware) || [];\n\n    mimes.forEach((mime: string) => {\n      if (!request.accepts(mime)) {\n        throw new NotAcceptable(mime);\n      }\n    });\n  }\n}\n"],"sourceRoot":"../../../"}