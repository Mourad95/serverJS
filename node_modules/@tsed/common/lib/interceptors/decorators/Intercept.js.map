{"version":3,"sources":["../src/common/interceptors/decorators/Intercept.ts"],"names":[],"mappings":";;AAAA,qCAAuC;AAGvC,gFAA2E;AAE3E;;;;;;GAMG;AACH,mBAAkD,WAAoB,EAAE,OAAa;IACnF,OAAO,CAAC,MAAW,EAAE,WAAmB,EAAE,UAA8B,EAAE,EAAE;QAC1E,YAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,sBAAsB,EAAE;YAC/C,CAAC,WAAW,CAAC,EAAE;gBACb,WAAW,EAAE,QAAQ;gBACrB,WAAW;gBACX,QAAQ,EAAE,mDAAwB,CAAC,WAAW,EAAE,WAAW,EAAE,OAAO,CAAC;aACtE;SACuB,CAAC,CAAC;QAE5B,OAAO,UAAU,CAAC;IACpB,CAAC,CAAC;AACJ,CAAC;AAZD,8BAYC","file":"Intercept.js","sourcesContent":["import {Store, Type} from \"@tsed/core\";\nimport {IInjectableProperties} from \"../../di/interfaces/IInjectableProperties\";\nimport {IInterceptor} from \"../interfaces/IInterceptor\";\nimport {interceptorInvokeFactory} from \"../utils/interceptorInvokeFactory\";\n\n/**\n * Attaches interceptor to method call and executes the before and after methods\n *\n * @param interceptor\n * @param options\n * @decorator\n */\nexport function Intercept<T extends IInterceptor>(interceptor: Type<T>, options?: any): Function {\n  return (target: any, propertyKey: string, descriptor: PropertyDescriptor) => {\n    Store.from(target).merge(\"injectableProperties\", {\n      [propertyKey]: {\n        bindingType: \"custom\",\n        propertyKey,\n        onInvoke: interceptorInvokeFactory(propertyKey, interceptor, options)\n      }\n    } as IInjectableProperties);\n\n    return descriptor;\n  };\n}\n"],"sourceRoot":"../../../"}