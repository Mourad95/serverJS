{"version":3,"sources":["../src/common/mvc/components/SendResponseMiddleware.ts"],"names":[],"mappings":";;;AAAA,mCAAmC;AACnC,iFAA4E;AAE5E,+DAA0D;AAC1D,gEAA2D;AAC3D,wEAAmE;AAGnE;;;GAGG;AAEH,IAAa,sBAAsB,GAAnC;IACE,YAAoB,gBAAkC;QAAlC,qBAAgB,GAAhB,gBAAgB,CAAkB;IAAG,CAAC;IAEnD,GAAG,CAAiB,IAAS,EAAc,QAA0B;QAC1E,MAAM,IAAI,GAAG,OAAO,IAAI,CAAC;QAEzB,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,IAAI,IAAI,KAAK,IAAI,IAAI,CAAC,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;gBACvE,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC;aAC7B;iBAAM;gBACL,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;aACtD;SACF;IACH,CAAC;CACF,CAAA;AAXC;IAAY,mBAAA,2BAAY,EAAE,CAAA,EAAa,mBAAA,mBAAQ,EAAE,CAAA;;;;iDAUhD;AAbU,sBAAsB;IADlC,uBAAU,EAAE;6CAE2B,mCAAgB;GAD3C,sBAAsB,CAclC;AAdY,wDAAsB","file":"SendResponseMiddleware.js","sourcesContent":["import * as Express from \"express\";\nimport {ConverterService} from \"../../converters/services/ConverterService\";\n\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {Response} from \"../../filters/decorators/response\";\nimport {ResponseData} from \"../../filters/decorators/responseData\";\nimport {IMiddleware} from \"../interfaces/index\";\n\n/**\n * @private\n * @middleware\n */\n@Middleware()\nexport class SendResponseMiddleware implements IMiddleware {\n  constructor(private converterService: ConverterService) {}\n\n  public use(@ResponseData() data: any, @Response() response: Express.Response) {\n    const type = typeof data;\n\n    if (data !== undefined) {\n      if (data === null || [\"number\", \"boolean\", \"string\"].indexOf(type) > -1) {\n        response.send(String(data));\n      } else {\n        response.json(this.converterService.serialize(data));\n      }\n    }\n  }\n}\n"],"sourceRoot":"../../../"}